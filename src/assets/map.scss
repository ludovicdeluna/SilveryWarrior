$map-ratio: 1.5168;
$map-width: 1440px;

.MapContainer {
  position: relative;
  overflow: hidden;
  margin-bottom: 1rem;
  &:after {
    content:"";
    position: absolute;
    /*930x23*/
    height: 23px;
    bottom: 0;
    right: -10px;
    left: -15px;
    background: url(../assets/images/horizontal_separator.png) repeat-x top left / contain;
    transform: rotateX(180deg);
  }
}

.MapScroll {
  overflow: auto;
  height: 80vh;
  max-height: ($map-width / $map-ratio);
  will-change: scroll-position;
}

@keyframes mapAppear {
  from {
    opacity: 0;
    transform: translateY(5%);
  }
}

.Map {
  position: relative;
  overflow: auto;
  background: url(../assets/images/map_2.png);
  background-size: cover;
  grid-area: table;
  width: $map-width;
  height: ($map-width / $map-ratio);
  animation: mapAppear .3s ease-in;

  &__cells {
    display: grid;
    height: 100%;
    padding: 5% 10.5% 9.1% 11%;
    grid-template-columns: repeat(32, 1fr);
    grid-template-rows: repeat(21, 1fr);
    width: 100%;
    height: 100%;
    mix-blend-mode: darken;
  }
}

.Cell {
  position: relative;
  background-size: 1000% auto;
  background-repeat: no-repeat;
  display: flex;

  div {
    flex: 1 0 auto;
  }

  &--current:before {
    content:'';
    position: absolute;
    top: -10%;
    left: -10%;
    width: 120%;
    height: 120%;
    z-index: 1;
    pointer-events: none;
    background: url('../assets/images/cursor.png') no-repeat top / contain;
    mix-blend-mode: darken;
  }

  &--reachable:before {
    content:'';
    position: absolute;
    top: 5%;
    left: 5%;
    width: 90%;
    height: 90%;
    pointer-events: none;
    background: url('../assets/images/cursor.png') no-repeat top / contain;
    mix-blend-mode: darken;
    // animation: appear 0.16s;
  }
  &--reachable:hover {
    z-index: 1;
    transform: scale(1.1);
    cursor: url('../assets/images/cursor_2.png'), auto;
  }

  // Kinds

  &--forest {
    background-image: url('../assets/images/map_sprite.png');
    background-position: 0 11%;
    &:nth-child(2n) {background-position: 0 23%;}
    &:nth-child(3n) {background-position: 0 33%;}
    &:nth-child(5n) {background-position: 0 44%;}
    &:nth-child(7n) {background-position: 0 55%;}
  }
  &--city {
    background-image: url('../assets/images/map_sprite.png');
    background-position: 44% 0;
  }
  &--mountain {
    background-image: url('../assets/images/map_sprite.png');
    background-position: 23% 55%;
    &:nth-child(2n) {background-position: 23% 33%;}
    &:nth-child(3n) {background-position: 23% 44%;}
  }
  &--hills {
    background-image: url('../assets/images/map_sprite.png');
    background-position: 22% 33%;
  }
}

// Admin
.mapEditor {
  .Map{
    width: $map-width;
    height: $map-width/$map-ratio;
  }
  .Cell {
    transition: none;
    mix-blend-mode: darken;
    &:before {
      display: none;
    }
    &--current {
      border: 3px solid black;
    }
    &--plain {background: gold;}
    &--forest {background: forestgreen;}
    &--city {background: darkblue}
    &--mountain {background: darkslategrey}
    &--hills {background: darkgreen;}
    &--unreachable {background: dimgrey;}
  }
}
